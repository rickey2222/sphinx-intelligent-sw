# 数据库

## 数据库——材料库
智能软件系统提供用户定义的特殊材料，用户可自定义并上传特定材料在各个波段的性能数据并在模型构建中使用。
点击上传按钮即可添加以xls、xlsx及csv文件存储的材料折射率，文件第一列为波长，第二、第三列分别为材料的n、K值。如图所示，添加完成后的材料折射率会显示在折线图中。
![材料库页面展示.png](./asserts/material.jpg)
<center> 图1 材料库页面展示 </center>
用户可在器件仿真中调用材料表中的折射率，其中字符串中输入存储的材料名：

```
data = device.get_material('xxxx')
# data数据提取
# data['wave']: 材料波长信息
# data['n']: 材料折射率n
# data['k']: 材料折射率k
```
## 数据库——器件库
在器件仿真及优化算法模块中用户运行的模型及结果按照类型保存在器件库中，器件表有模型结构参数信息、建模代码区域、模型预览图、性能图及计算结果展示：
![器件库页面展示.png](./asserts/device.jpg)
<center> 图2 器件库页面展示 </center>

+ 结构参数包含模型结构的中心坐标，大小及高度
+ 代码区域记录模型建模及参数提取所用代码
+ 性能图存储模型仿真结果
+ 计算结果记录模型仿真过程中的解释器输出
### 器件库中添加/删除器件
软件支持用户新添加器件，点击器件表中的加号，输入器件名称及类型后点击保存即可在仿真模块中使用。用户也可以在器件仿真或优化算法模块中另存为功能添加器件。同时，拥有管理员权限的用户可以在数据库中删除器件。

## 数据库——工程环境
软件系统工程环境表中保存了不同环境的镜像地址及域名，现可提供：
* 基于MEEP-FDTD算法的镜像地址
* 用于光谱预测pytorch算法的镜像地址
* 用于RCWA算法的镜像地址
* 后续可添加其他算法镜像
商用软件Lumerical及CST无需添加。

## 数据库——算法表
微纳光学智能设计软件支持上传算法扩展文件以及仿真使用的数据文件，算法表具备软件的文件管理功能。用户上传以ZIP格式的算法包后可在器件仿真、优化算法模块调用。
![数据库算法表.png](./asserts/add_doc.jpg)
<center> 图2 算法表页面展示 </center>
用户可点击添加按钮上传所需算法的ZIP压缩包，添加成功后可在右侧窗口看到解压后的文件集层级结构，点击文件后可预览。
用户使用是需要在器件仿真或优化算法模块中点击算法添加按钮，加载对应的算法表，添加完成后可在代码区导入算法表中的文件，添加形式符合py文件调用规则。

![数据库算法表导入.png](./asserts/add_doc2.jpg)
<center> 图2 算法表导入展示 </center>

### 算法表中添加/下载算法
与器件库类似，算法表中算法压缩包可以通过点击加号按钮添加，右键“下载压缩包”可以下载算法。非管理员无编辑算法表的权限。

