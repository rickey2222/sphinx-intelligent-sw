<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>仿真 &mdash; 微纳光学智能设计软件 v1 文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="教程/微纳结构" href="../%E5%BE%AE%E7%BA%B3%E7%BB%93%E6%9E%84/%E5%BE%AE%E7%BA%B3%E7%BB%93%E6%9E%84.html" />
    <link rel="prev" title="软件设计框架及原理" href="../%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A1%86%E6%9E%B6%E5%8F%8A%E5%8E%9F%E7%90%86/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A1%86%E6%9E%B6%E5%8F%8A%E5%8E%9F%E7%90%86.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> 微纳光学智能设计软件
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">目录:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../%E7%AE%80%E4%BB%8B/index.html">软件平台简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/index.html">软件安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E8%BD%AF%E4%BB%B6%E6%A8%A1%E5%9D%97%E4%BB%8B%E7%BB%8D/index.html">软件模块</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../contents.html">软件API接口</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A1%86%E6%9E%B6%E5%8F%8A%E5%8E%9F%E7%90%86/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A1%86%E6%9E%B6%E5%8F%8A%E5%8E%9F%E7%90%86.html">软件设计框架及原理</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">仿真</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">环境选择</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">全局定义</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">模型构建</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">源设置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">监视器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">仿真区域</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">仿真运行</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">结果提取</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">性能图保存</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">退出仿真</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../%E5%BE%AE%E7%BA%B3%E7%BB%93%E6%9E%84/%E5%BE%AE%E7%BA%B3%E7%BB%93%E6%9E%84.html">教程/微纳结构</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">微纳光学智能设计软件</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../contents.html">软件API接口</a></li>
      <li class="breadcrumb-item active">仿真</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/软件API接口/仿真/仿真.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>仿真<a class="headerlink" href="#id1" title="此标题的永久链接"></a></h1>
<section id="id2">
<h2>环境选择<a class="headerlink" href="#id2" title="此标题的永久链接"></a></h2>
<p>微纳光学智能设计软件中，在软件代码区域根据仿真模型选择适配的运行环境。分别在建模代码的<strong>初始</strong>及<strong>结尾</strong>部分调用环境代码：</p>
<ul class="simple">
<li><p>FDTD环境：</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim_start</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s1">&#39;meep&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">sim_end</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s1">&#39;meep&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>lumerical环境：</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim_start</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s1">&#39;lum&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">sim_end</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s1">&#39;lum&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>CST环境：</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim_start</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s1">&#39;cst&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">sim_end</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s1">&#39;cst&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>环境外需要使用的数据需要在建模代码中使用时：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unityCode</span><span class="o">.</span><span class="n">save_data</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">need_to_save_data</span><span class="p">)</span> <span class="c1">#将不同环境中需保存的数据存在变量data中（变量名可自定义），环境外使用data即可调用。</span>
</pre></div>
</div>
</section>
<section id="id3">
<h2>全局定义<a class="headerlink" href="#id3" title="此标题的永久链接"></a></h2>
<p>微纳光学智能设计软件模型仿真需要定义全局变量，在代码区域中传入：</p>
<ul class="simple">
<li><p>nfreq[<font color=red>number</font>]：频率采样点，默认值为200</p></li>
<li><p>wl_max[<font color=red>number</font>]：仿真所用波长最大值，默认值为1600nm</p></li>
<li><p>wl_min[<font color=red>number</font>] ：仿真所用波长最小值，默认值为1100nm</p></li>
<li><p>T_z[<font color=red>number</font>]：meep环境中监视器末端，默认值为1.9</p></li>
<li><p>resolution[<font color=red>number</font>]：仿真分辨率，默认值为50（每单位um划分为50格）</p></li>
<li><p>auto_shutoff_min[<font color=red>number</font>]：仿真截断时间，默认为1e-9s</p></li>
</ul>
<p>代码区通过unity_sim.set_sim_paras()函数定义全局变量，比如：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 基础结构</span>
<span class="n">unit</span> <span class="o">=</span> <span class="mf">1e-6</span>
<span class="n">focal_length</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">unit</span>                <span class="c1"># 聚焦距离</span>
<span class="n">lens_radius</span> <span class="o">=</span> <span class="mi">15</span> <span class="o">*</span> <span class="n">unit</span>                 <span class="c1"># 透镜半径</span>
<span class="n">substrate_thickness</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">unit</span>          <span class="c1"># SiO2衬底厚度</span>
<span class="n">period</span> <span class="o">=</span> <span class="mf">1.8</span> <span class="o">*</span> <span class="n">unit</span>
<span class="n">height</span> <span class="o">=</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">unit</span>                     <span class="c1"># Si柱厚度</span>
<span class="n">wavelength</span> <span class="o">=</span> <span class="mf">3.8</span> <span class="o">*</span> <span class="n">unit</span>                 <span class="c1"># 工作波长</span>
<span class="n">T_z</span> <span class="o">=</span> <span class="n">height</span> <span class="o">+</span> <span class="mf">1.5e-6</span>
<span class="n">wl_max</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">unit</span>
<span class="n">wl_min</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">unit</span>
<span class="n">nfreq</span> <span class="o">=</span> <span class="mi">201</span>

<span class="n">unity_sim</span><span class="o">.</span><span class="n">set_sim_paras</span><span class="p">(</span><span class="n">wl_max</span><span class="o">=</span><span class="n">wl_max</span><span class="p">,</span><span class="n">wl_min</span><span class="o">=</span><span class="n">wl_min</span><span class="p">,</span><span class="n">T_z</span><span class="o">=</span><span class="n">T_z</span><span class="p">,</span><span class="n">nfreq</span><span class="o">=</span><span class="n">nfreq</span><span class="p">,</span><span class="n">resolution</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id4">
<h2>模型构建<a class="headerlink" href="#id4" title="此标题的永久链接"></a></h2>
<p>微纳光学智能设计软件模型构建支持材料数据调用数据库中材料表中的特定材料、用户自定义折射率材料等，模型可构建方块、圆柱。</p>
<ol class="arabic simple">
<li><p>材料定义
用户自定义材料折射率：</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">define_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;定义材料的折射率</span>
<span class="sd">            name：类型：str，自定义材料名称</span>
<span class="sd">            n:材料的折射率</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>使用场景：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 材料定义</span>
<span class="n">unity_sim</span><span class="o">.</span><span class="n">define_material</span><span class="p">(</span><span class="s1">&#39;SiO2&#39;</span><span class="p">,</span> <span class="mf">1.444</span><span class="p">)</span>
<span class="n">unity_sim</span><span class="o">.</span><span class="n">define_material</span><span class="p">(</span><span class="s1">&#39;Si&#39;</span><span class="p">,</span> <span class="mf">3.476</span><span class="p">)</span>
</pre></div>
</div>
<p>用户调用数据库-材料表中材料信息：
def nk_material(self,w,n,k,name,**kwargs):
“””
自定义n,k模型，传入材料
par:
w:波长
n:折射率
name:材料名称，str
k:消光系数
“””</p>
<p>使用场景：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 导入材料</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;3_Al_Rakic&#39;</span>
<span class="n">data</span><span class="o">=</span><span class="n">device</span><span class="o">.</span><span class="n">get_material</span><span class="p">(</span><span class="s1">&#39;3_Al_Rakic&#39;</span><span class="p">)</span>
<span class="n">unity_sim</span><span class="o">.</span><span class="n">nk_material</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>其中name为材料表中存储的材料名（非中文）
2. 模型定义
用户建立方块模型：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">add_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">material_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; 定义方块模型尺寸</span>
<span class="sd">        parameter:</span>
<span class="sd">            center:  (x,y,z),中心坐标</span>
<span class="sd">            size: (x_span,y_span,z_span),沿x,y,z轴尺寸大小</span>
<span class="sd">            material_name: 定义材料,类型：str</span>
<span class="sd">        **kwargs：</span>
<span class="sd">            name:定义模型名称</span>
<span class="sd">            mesh_order:</span>
<span class="sd">            color：定义模型材料颜色</span>
<span class="sd">            opacity:定义模型透明度</span>
<span class="sd">            line：True(default),是否线框</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>用户建立圆柱模型：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_cylinder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">material_name</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;定义圆柱模型尺寸</span>
<span class="sd">        parameter:</span>
<span class="sd">            center:  (x,y,z),中心坐标</span>
<span class="sd">            radius: 圆柱半径</span>
<span class="sd">            height：圆柱高度</span>
<span class="sd">            material_name: 定义材料，类型：str</span>
<span class="sd">        **kwargs：</span>
<span class="sd">            name:定义模型名称</span>
<span class="sd">            mesh_order</span>
<span class="sd">            color：定义模型材料颜色</span>
<span class="sd">            opacity:定义模型透明度</span>
<span class="sd">            line：True(default),是否线框</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>使用场景：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 添加 SiO2 衬底</span>
<span class="n">unit</span> <span class="o">=</span> <span class="mf">1e-6</span>
<span class="n">period</span> <span class="o">=</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">unit</span>
<span class="n">substrate_thickness</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">unit</span>  <span class="c1"># SiO2层衬底厚度</span>
<span class="n">unity_sim</span><span class="o">.</span><span class="n">define_material</span><span class="p">(</span><span class="s1">&#39;SiO2&#39;</span><span class="p">,</span> <span class="mf">1.45</span><span class="p">)</span>
<span class="n">unity_sim</span><span class="o">.</span><span class="n">add_block</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">period</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">substrate_thickness</span><span class="p">),</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">substrate_thickness</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span>
										<span class="n">material_name</span><span class="o">=</span><span class="s1">&#39;SiO2&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;substrate&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Grey&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>软件代码兼容各个环境的API。</p>
</section>
<section id="id5">
<h2>源设置<a class="headerlink" href="#id5" title="此标题的永久链接"></a></h2>
<p>微纳光学智能设计软件光源支持平面光源、模式光和高斯光源：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">add_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;定义光源</span>
<span class="sd">        parameter:</span>
<span class="sd">            center:  (x,y,z),中心坐标</span>
<span class="sd">            size: (x_span,y_span,z_span),沿x,y,z轴尺寸大小</span>
<span class="sd">        **kwargs：</span>
<span class="sd">            name:定义模型名称</span>
<span class="sd">            color：定义模型材料颜色，Red(default)</span>
<span class="sd">            opacity:定义模型透明度</span>
<span class="sd">            line：True(default),是否线框</span>
<span class="sd">            mode: TE(default),TM, LCP, RCP</span>
<span class="sd">            source_type: 源类型   PlaneSource(dafault): 上方入射, 支持TE/TM/LCP/RCP</span>
<span class="sd">                          GaussSource: 下方入射, 支持 TE/TM</span>
<span class="sd">            w0: 束腰半径</span>
<span class="sd">            direction: 入射方向，forward/backward(default)</span>
<span class="sd">            injection: 入射轴，x/y/z(default)</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>使用左旋偏振光场景：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unit</span> <span class="o">=</span> <span class="mf">1e-6</span>
<span class="n">period</span> <span class="o">=</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">unit</span>
<span class="n">source_z</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">unit</span>
<span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;LCP&#39;</span>
<span class="n">unity_sim</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">period</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">source_z</span><span class="p">),</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id6">
<h2>监视器<a class="headerlink" href="#id6" title="此标题的永久链接"></a></h2>
<p>微纳光学智能设计软件支持功率监视器及电场监视器：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">add_monitor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;定义功率监视器区域</span>
<span class="sd">        parameter:</span>
<span class="sd">            center:  (x,y,z),中心坐标</span>
<span class="sd">            size: (x_span,y_span,z_span),沿x,y,z轴尺寸大小</span>
<span class="sd">        **kwargs：</span>
<span class="sd">            name:定义模型名称</span>
<span class="sd">            color：定义模型材料颜色，Red(default)</span>
<span class="sd">            opacity:定义模型透明度</span>
<span class="sd">            line：True(default),是否线框</span>
<span class="sd">        return:</span>
<span class="sd">            监视器的名称</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">add_monitor_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;定义电场监视器区域</span>
<span class="sd">        parameter:</span>
<span class="sd">            center:  (x,y,z),中心坐标</span>
<span class="sd">            size: (x_span,y_span,z_span),沿x,y,z轴尺寸大小</span>
<span class="sd">        **kwargs：</span>
<span class="sd">            name:定义模型名称</span>
<span class="sd">            color：定义模型材料颜色，Red(default)</span>
<span class="sd">            opacity:定义模型透明度</span>
<span class="sd">            line：True(default),是否线框</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>使用场景：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unity_sim</span><span class="o">.</span><span class="n">add_monitor</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">period</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">T_z</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;T_monitor&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>备注: 用户必需定义center，size，name参数来建立监视器，否则无法加载</em></p>
</section>
<section id="id7">
<h2>仿真区域<a class="headerlink" href="#id7" title="此标题的永久链接"></a></h2>
<p>微纳光学智能设计软件使用unity_sim.add_sim_area(center, size)定义模型的仿真区域:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">add_sim_area</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; 定义仿真区域</span>
<span class="sd">        parameter:</span>
<span class="sd">            center:  (x,y,z),中心坐标</span>
<span class="sd">            size: (x_span,y_span,z_span),沿x,y,z轴尺寸大小</span>
<span class="sd">        **kwargs：</span>
<span class="sd">            name:定义模型名称</span>
<span class="sd">            color：定义模型材料颜色，Orange(default)</span>
<span class="sd">            opacity:定义模型透明度, 0.4(default)</span>
<span class="sd">            line：True(default),是否线框</span>
<span class="sd">            boundary: 边界条件: Periodic(default)/ PML/ Symmetric_TE/ Symmetric_TM</span>
<span class="sd">                               或者输入 {x_bc, y_bc, z_bc}指定各自方向的边界条件, 必须输入x_bc, y_bc</span>
<span class="sd">            dimension: 仿真区域维度，2D/3D(default)</span>
<span class="sd">            sim_time: 仿真时间，10000 * 1e-15 (default)</span>
<span class="sd">            mesh_accuracy：网格精度，1~9，2 (default)，数值越大，网格精度越高</span>
<span class="sd">            mesh_geometry: 加网格的结构名称</span>
<span class="sd">            mesh_dx:网格x方向的精度，若在该方向设定网格步长，需输入</span>
<span class="sd">            mesh_dy:网格y方向的精度，若在该方向设定网格步长，需输入</span>
<span class="sd">            mesh_dz:网格y方向的精度，若在该方向设定网格步长，需输入</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>使用场景：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unity_sim</span><span class="o">.</span><span class="n">add_sim_area</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">period</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">z_span</span><span class="p">),</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">z_cen</span><span class="p">),</span> <span class="n">boundary</span><span class="o">=</span><span class="s1">&#39;Periodic&#39;</span><span class="p">,</span> <span class="n">mesh_accuracy</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sim_time</span><span class="o">=</span><span class="mf">3000e-15</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id8">
<h2>仿真运行<a class="headerlink" href="#id8" title="此标题的永久链接"></a></h2>
<p>微纳光学智能设计软件使用unity_sim.run()仿真运行：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;仿真运行</span>
<span class="sd">        **kwargs:</span>
<span class="sd">            name:后台保存文件.fsp名称</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>使用场景：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">save_name</span> <span class="o">=</span> <span class="s1">&#39;chiral_LCP&#39;</span>
<span class="n">unity_sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">save_name</span><span class="o">=</span><span class="n">save_name</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id9">
<h2>结果提取<a class="headerlink" href="#id9" title="此标题的永久链接"></a></h2>
<p>微纳光学智能设计软件可提取监视器结果：</p>
<ol class="arabic simple">
<li><p>提取功率监视器：</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">get_result_monitor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;从功率监视器提取数据</span>
<span class="sd">        parameter:</span>
<span class="sd">            name:  监视器，add_monitor()中的名字</span>
<span class="sd">        return：</span>
<span class="sd">            power:从监视器提取的数据T/R</span>
<span class="sd">            wl: 波长， 单位为设定的unit</span>
<span class="sd">            f:频率点</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>提取电场监视器：</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">get_result_monitor_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;从电场监视器提取数据</span>
<span class="sd">        return：</span>
<span class="sd">            Ex:电场x的分量</span>
<span class="sd">            Ey:电场y的分量</span>
<span class="sd">            Ez:电场z的分量</span>
<span class="sd">            f: 频率，单位 Hz</span>
<span class="sd">            wl: 波长，单位 m</span>
<span class="sd">            x, y, z: 电场监视器范围，单位 m</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="id10">
<h2>性能图保存<a class="headerlink" href="#id10" title="此标题的永久链接"></a></h2>
<p>微纳光学智能设计软件支持图片保存：数据处理后绘制图片可保存到页面性能图中，后续也可通过数据库-器件库查看，使用
device.save_fig(name, file_path, file_data_path):</p>
<ul class="simple">
<li><p>name[<font color=red>string</font>]：图片名称</p></li>
<li><p>file_path[<font color=red>string</font>]：图片保存名，例如picture.png</p></li>
<li><p>file_data_path[<font color=red>string</font>]：数据保存名，例如data.txt</p></li>
</ul>
<p>使用场景：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># 结果处理 - 透射率</span>
<span class="n">wl</span> <span class="o">=</span> <span class="n">result_RCP</span><span class="p">[</span><span class="s2">&quot;wl&quot;</span><span class="p">]</span>  <span class="c1"># 单位： um</span>
<span class="n">T_LCP</span> <span class="o">=</span> <span class="n">result_LCP</span><span class="p">[</span><span class="s2">&quot;power&quot;</span><span class="p">]</span>
<span class="n">T_RCP</span> <span class="o">=</span> <span class="n">result_RCP</span><span class="p">[</span><span class="s2">&quot;power&quot;</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wl</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">T_LCP</span><span class="p">),</span> <span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;T_LCP&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wl</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">T_RCP</span><span class="p">),</span> <span class="s1">&#39;g--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;T_RCP&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wl</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">T_LCP</span><span class="p">)</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">T_RCP</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CD&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;wavelength (μm)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;chiral_CD.png&quot;</span><span class="p">)</span>

<span class="n">LCP_power</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">T_LCP</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s2">&quot;LCP_power.txt&quot;</span><span class="p">,</span> <span class="n">LCP_power</span><span class="p">)</span>  
<span class="n">device</span><span class="o">.</span><span class="n">save_fig</span><span class="p">(</span><span class="s2">&quot;chiral_CD&quot;</span><span class="p">,</span><span class="n">file_path</span><span class="o">=</span><span class="s2">&quot;chiral_CD.png&quot;</span><span class="p">,</span> <span class="n">file_data_path</span> <span class="o">=</span> <span class="s2">&quot;LCP_power.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>性能图展示后可通过导出数据按钮下载file_data_path中存储的数据文件。</p>
</section>
<section id="id11">
<h2>退出仿真<a class="headerlink" href="#id11" title="此标题的永久链接"></a></h2>
<p>微纳光学智能设计软件退出当前仿真进程可点击代码区域右侧暂停按钮强退出，或者在代码区使用quit()函数：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">quit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        关闭 lumerical/cst/meep</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>使用场景：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unity_sim</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="../%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A1%86%E6%9E%B6%E5%8F%8A%E5%8E%9F%E7%90%86/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A1%86%E6%9E%B6%E5%8F%8A%E5%8E%9F%E7%90%86.html" class="btn btn-neutral float-left" title="软件设计框架及原理" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../%E5%BE%AE%E7%BA%B3%E7%BB%93%E6%9E%84/%E5%BE%AE%E7%BA%B3%E7%BB%93%E6%9E%84.html" class="btn btn-neutral float-right" title="教程/微纳结构" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2023, Rickey.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>